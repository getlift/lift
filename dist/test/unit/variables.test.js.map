{
  "version": 3,
  "sources": ["../../../test/unit/variables.test.ts"],
  "sourcesContent": ["import { runServerlessCli } from \"../utils/runServerlessCli\";\n\ndescribe(\"variables\", () => {\n    it(\"should resolve construct variables\", async () => {\n        const { cfTemplate } = await runServerlessCli({\n            fixture: \"variables\",\n            command: \"package\",\n        });\n        // Resolves construct variables in `functions`\n        expect(cfTemplate.Resources.FooLambdaFunction).toHaveProperty(\"Properties.Environment.Variables.VAR1\", {\n            Ref: \"barQueueB989EBF4\",\n        });\n        // Resolves construct variables in `resources`\n        expect(cfTemplate.Resources.UserDefinedResource).toHaveProperty(\"Properties.BucketName\", {\n            Ref: \"barQueueB989EBF4\",\n        });\n        // Resolves construct variables in `custom`\n        expect(cfTemplate.Resources.FooLambdaFunction).toHaveProperty(\"Properties.Environment.Variables.CUSTOM_VAR\", {\n            Ref: \"bucketBucketF19722A9\",\n        });\n    });\n\n    it(\"should resolve variables in constructs\", async () => {\n        const { cfTemplate } = await runServerlessCli({\n            fixture: \"variables\",\n            command: \"package\",\n        });\n        expect(cfTemplate.Resources.BarWorkerLambdaFunction).toHaveProperty(\"Properties.Environment.Variables\", {\n            // Native serverless variable\n            VAR1: \"bar\",\n            // Custom variables defined by plugins (using a different API every time\n            CUSTOM_VAR1: \"Custom variable 1\",\n            CUSTOM_VAR2: \"Custom variable 2\",\n        });\n        // ${construct:bucket.bucketName} should have been resolved\n        expect(cfTemplate.Resources.barAlarmTopicSubscription56286022).toHaveProperty(\"Properties.Endpoint\", {\n            Ref: \"bucketBucketF19722A9\",\n        });\n        expect(cfTemplate.Resources.appCDN7AD2C001).toMatchObject({\n            Properties: {\n                DistributionConfig: {\n                    Aliases: [\"Custom variable 1\"],\n                    ViewerCertificate: {\n                        AcmCertificateArn:\n                            \"arn:aws:acm:us-east-1:123466615250:certificate/abcdef-b896-4725-96e3-6f143d06ac0b\",\n                    },\n                },\n            },\n        });\n    });\n});\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA,8BAAiC;AAEjC,SAAS,aAAa,MAAM;AACxB,KAAG,sCAAsC,YAAY;AACjD,UAAM,EAAE,eAAe,MAAM,8CAAiB;AAAA,MAC1C,SAAS;AAAA,MACT,SAAS;AAAA;AAGb,WAAO,WAAW,UAAU,mBAAmB,eAAe,yCAAyC;AAAA,MACnG,KAAK;AAAA;AAGT,WAAO,WAAW,UAAU,qBAAqB,eAAe,yBAAyB;AAAA,MACrF,KAAK;AAAA;AAGT,WAAO,WAAW,UAAU,mBAAmB,eAAe,+CAA+C;AAAA,MACzG,KAAK;AAAA;AAAA;AAIb,KAAG,0CAA0C,YAAY;AACrD,UAAM,EAAE,eAAe,MAAM,8CAAiB;AAAA,MAC1C,SAAS;AAAA,MACT,SAAS;AAAA;AAEb,WAAO,WAAW,UAAU,yBAAyB,eAAe,oCAAoC;AAAA,MAEpG,MAAM;AAAA,MAEN,aAAa;AAAA,MACb,aAAa;AAAA;AAGjB,WAAO,WAAW,UAAU,mCAAmC,eAAe,uBAAuB;AAAA,MACjG,KAAK;AAAA;AAET,WAAO,WAAW,UAAU,gBAAgB,cAAc;AAAA,MACtD,YAAY;AAAA,QACR,oBAAoB;AAAA,UAChB,SAAS,CAAC;AAAA,UACV,mBAAmB;AAAA,YACf,mBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;",
  "names": []
}
